"use strict";angular.module("portfolio",["ngResource","ngAnimate","mainRoutes","dashboardRoutes"]).run(["$rootScope","$state","$location","UserStatus",function(a,b,c,d){a.$on("$stateChangeStart",function(a,c,e){var f=!!c.data&&c.data.restricted;d.getUserStatus().$promise.then(function(c){console.log(c.status),!c.status&&f&&(a.preventDefault(),b.go("login",{}))})}),a.$on("$stateChangeSuccess",function(){document.body.scrollTop=0})}]),angular.module("portfolio").controller("AboutCtrl",["$scope",function(a){for(var b=["HTML5","CSS3","Javascript","jQuery","d3.js","Angular","Node.js","Express","MongoDB","PHP","Wordpress","Git","Grunt","Google Analytics"],c=$(window).outerWidth()>640?3:2,d=0,e=Math.ceil(b.length/c),f=d;f<c;f++)a["sl_"+f]=b.slice(d,e),d=e,e+=e}]),angular.module("portfolio").controller("AllWorkCtrl",["$scope","GetAllWork",function(a,b){b.query(function(b){a.work=b}),a.limit=4,a.init=function(){$(document).ready(function(){$(".workItem__link img").each(function(a){var b=$(this).attr("data-img-src");$(this).attr("src",b),$(this).on("load",function(){$(this).get(0).complete&&$(this).parent().delay(100*a).animate({opacity:1},1500)})})})},setTimeout(function(){a.init()},500)}]),angular.module("portfolio").controller("AuthCtrl",["$scope","$state","$location","LoginSvc","LogoutSvc","RegisterSvc",function(a,b,c,d,e,f){"logout"===b.current.name&&e.get({},function(a){c.path("/")}),a.register=function(){f.save(a.registerData,function(a){c.path("/")})},a.login=function(){d.save(a.loginData,function(a){c.path("/dashboard")},function(a){c.path("/")})}}]),angular.module("portfolio").controller("ContactCtrl",["$scope","ContactSvc",function(a,b){a.send=function(){b.save(a.contactData,function(b){a.confMsg=b.message,$(".footer__confMsg p").addClass("active"),"success"===b.status&&($(".footer__form input[type='text'], .footer__form textarea").val(""),setTimeout(function(){$(".footer__confMsg p").removeClass("active")},5e3))})}}]),angular.module("portfolio").controller("DashboardCtrl",["$scope","$location","GetAllWork","GetWorkItem",function(a,b,c,d){c.query(function(b){a.work=b}),a.save=function(){c.save(a.workItem,function(){b.path("/dashboard")})}}]),angular.module("portfolio").controller("DashboardDeleteCtrl",["$scope","$stateParams","$location","GetWorkItem",function(a,b,c,d){d.get({title:b.id},function(b){a.workItem=b}),a.delete=function(){d.remove({title:b.id},function(){c.path("/dashboard")})}}]),angular.module("portfolio").controller("DashboardEditCtrl",["$scope","$stateParams","$location","GetWorkItem",function(a,b,c,d){d.get({title:b.id},function(b){a.workItem=b}),a.save=function(){console.log(b.id),d.update({title:b.id},a.workItem,function(){c.path("/dashboard")})}}]),angular.module("portfolio").controller("NavCtrl",["$scope","$state",function(a,b){function c(){$(".menu__links").addClass("active").fadeIn(300,function(){$(".menu__links li").each(function(a){$(this).delay(100*a).animate({opacity:1},500)})})}function d(){$(".menu__links").removeClass("active").fadeOut(100,function(){$(".menu__links li").css("opacity",0)})}a.$on("$stateChangeSuccess",function(){a.pageType=b.current.data.pageType,a.currentPage=b.current.name}),a.goToContact=function(){$("body, html").animate({scrollTop:$(".footer").offset().top},1e3)},a.showMenu=function(){$(".burger").toggleClass("active"),$(".menu__links").hasClass("active")?(d(),$(".menu").removeClass("mobileDisplay")):($(".menu").addClass("mobileDisplay"),c())},a.hideMenu=function(){$(window).outerWidth()<641&&($(".burger").removeClass("active"),d(),$(".menu").removeClass("mobileDisplay"))},$(window).resize(function(){$(window).outerWidth()>640?($(".burger").removeClass("active"),$(".menu.mobileDisplay").removeClass("mobileDisplay"),$(".menu__links").removeClass("active").css("display","block"),$(".menu__links li").css("opacity",1)):($(".menu__links").css("display","none"),$(".menu__links li").css("opacity",0))})}]),angular.module("portfolio").controller("WorkCtrl",["$scope","$stateParams","GetWorkItem",function(a,b,c){c.get({title:b.id},function(b){a.work=b})}]),angular.module("dashboardRoutes",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("dashboard",{url:"/dashboard",templateUrl:"/src/js/views/dashboard/index.html",controller:"DashboardCtrl",data:{restricted:!0,pageType:"admin"}}).state("dashboard-add",{url:"/dashboard/add-new-work",templateUrl:"/src/js/views/dashboard/add.html",controller:"DashboardCtrl",data:{restricted:!0,pageType:"admin"}}).state("dashboard-edit",{url:"/dashboard/:id/edit",templateUrl:"/src/js/views/dashboard/edit.html",controller:"DashboardEditCtrl",data:{restricted:!0,pageType:"admin"}}).state("dashboard-delete",{url:"/dashboard/:id/delete",templateUrl:"/src/js/views/dashboard/delete.html",controller:"DashboardDeleteCtrl",data:{restricted:!0,pageType:"admin"}})}]),angular.module("mainRoutes",["ui.router"]).config(["$stateProvider","$locationProvider","$urlRouterProvider",function(a,b,c){b.html5Mode(),c.otherwise("/"),a.state("home",{url:"/",views:{"":{templateUrl:"/src/js/views/home.html",controller:"AllWorkCtrl as main"},"footer@home":{templateUrl:"/src/js/views/footer.html",controller:"ContactCtrl"}},data:{pageType:"main"}}).state("work",{url:"/work/:id",views:{"":{templateUrl:"/src/js/views/work-item.html",controller:"WorkCtrl"},"footer@work":{templateUrl:"/src/js/views/footer.html",controller:"ContactCtrl"}},data:{pageType:"main"}}).state("allWork",{url:"/client-work",views:{"":{templateUrl:"/src/js/views/all-work.html",controller:"AllWorkCtrl"},"footer@allWork":{templateUrl:"/src/js/views/footer.html",controller:"ContactCtrl"}},data:{pageType:"main"}}).state("about",{url:"/about",views:{"":{templateUrl:"/src/js/views/about.html",controller:"AboutCtrl"},"footer@about":{templateUrl:"/src/js/views/footer.html",controller:"ContactCtrl"}},data:{pageType:"main"}}).state("login",{url:"/login",templateUrl:"/src/js/views/auth/login.html",controller:"AuthCtrl",data:{pageType:"main"}}).state("logout",{url:"/logout",controller:"AuthCtrl",data:{pageType:"main"}}).state("register",{url:"/register",templateUrl:"/src/js/views/auth/register.html",controller:"AuthCtrl",data:{pageType:"main"}})}]),angular.module("portfolio").service("LoginSvc",["$resource",function(a){return a("/login")}]).service("LogoutSvc",["$resource",function(a){return a("/logout")}]).service("RegisterSvc",["$resource",function(a){return a("/register")}]).service("UserStatus",["$resource",function(a){var b=function(){var b=a("/user-status");return b.get({},function(a){return a.status})};return{getUserStatus:b}}]),angular.module("portfolio").service("ContactSvc",["$resource",function(a){return a("/form/contact")}]),angular.module("portfolio").service("GetAllWork",["$resource",function(a){return a("/api/work")}]).service("GetWorkItem",["$resource",function(a){return a("/api/work/:title",null,{update:{method:"PUT"}})}]);