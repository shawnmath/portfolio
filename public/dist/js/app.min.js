"use strict";angular.module("portfolio",["ngResource","ngAnimate","mainRoutes","dashboardRoutes"]).run(["$rootScope","$state","$location","UserStatus",function(a,b,c,d){a.$on("$stateChangeStart",function(a,c,e){var f=!!c.data&&c.data.restricted;d.getUserStatus().$promise.then(function(c){console.log(c.status),!c.status&&f&&(a.preventDefault(),b.go("login",{}))})}),a.$on("$stateChangeSuccess",function(){document.body.scrollTop=0})}]),angular.module("portfolio").controller("AboutCtrl",["$scope",function(a){for(var b=["HTML5","CSS3","Javascript","jQuery","d3.js","Angular","Node.js","Express","MongoDB","PHP","Wordpress","Git","Grunt","Google Analytics"],c=3,d=0,e=Math.ceil(b.length/c),f=d;f<c;f++)a["sl_"+f]=b.slice(d,e),d=e,e+=e}]),angular.module("portfolio").controller("AllWorkCtrl",["$state","$rootScope","$scope","GetAllWork",function(a,b,c,d){d.query(function(a){c.work=a}),c.limit=4,c.init=function(){$(document).ready(function(){$(".workItem__link img").each(function(a){var b=$(this).attr("data-img-src");console.log(b),$(this).delay(250*a).attr("src",b).animate({opacity:.4},500)})})},setTimeout(function(){c.init()},500)}]),angular.module("portfolio").controller("AuthCtrl",["$scope","$state","$location","LoginSvc","LogoutSvc","RegisterSvc","UserStatus",function(a,b,c,d,e,f,g){console.log(b.current.name),"logout"===b.current.name&&e.get({},function(a){console.log(a.status),g.getUserStatus().$promise.then(function(a){console.log("from ctrl - logged out: "+a.status)}),c.path("/")}),a.register=function(){f.save(a.registerData,function(a){console.log(a.status),g.getUserStatus().$promise.then(function(a){console.log("from ctrl - registered: "+a.status)}),c.path("/")})},a.login=function(){d.save(a.loginData,function(a){console.log(a.status),g.getUserStatus().$promise.then(function(a){console.log("from ctrl - logged in: "+a.status)}),c.path("/dashboard")},function(a){console.log(a),console.log(a.err),c.path("/")})}}]),angular.module("portfolio").controller("ContactCtrl",["$scope","$state","$location","ContactSvc",function(a,b,c,d){a.send=function(){d.save(a.contactData,function(b){a.confMsg=b.message,"success"===b.status&&($(".footer__form input[type='text'], .footer__form textarea").val(""),$(".footer__confMsg p").addClass("active"),setTimeout(function(){$(".footer__confMsg p").removeClass("active")},5e3))})}}]),angular.module("portfolio").controller("DashboardCtrl",["$scope","$stateParams","$location","GetAllWork","GetWorkItem",function(a,b,c,d,e){d.query(function(b){a.work=b}),a.save=function(){d.save(a.workItem,function(){c.path("/dashboard")}),console.log(a.workItem)}}]),angular.module("portfolio").controller("DashboardDeleteCtrl",["$scope","$stateParams","$location","GetWorkItem",function(a,b,c,d){d.get({id:b.id},function(b){a.workItem=b}),a.delete=function(){d.remove({id:b.id},function(){c.path("/dashboard")})}}]),angular.module("portfolio").controller("DashboardEditCtrl",["$scope","$stateParams","$location","GetWorkItem",function(a,b,c,d){d.get({id:b.id},function(b){a.workItem=b}),a.save=function(){d.update(a.workItem,function(){c.path("/dashboard")})}}]),angular.module("portfolio").controller("FooterCtrl",["$scope","$state",function(a,b){}]),angular.module("portfolio").controller("NavCtrl",["$rootScope","$scope","$state",function(a,b,c){function d(){$(".menu__links").addClass("active").fadeIn(300,function(){$(".menu__links li").each(function(a){$(this).delay(100*a).animate({opacity:1},500)})})}function e(){$(".menu__links").removeClass("active").fadeOut(100,function(){$(".menu__links li").css("opacity",0)})}b.$on("$stateChangeSuccess",function(){b.pageType=c.current.data.pageType,b.currentPage=c.current.name}),b.goToContact=function(){$("body, html").animate({scrollTop:$(".footer").offset().top},1e3)},b.showMenu=function(){$(".burger").toggleClass("active"),$(".menu__links").hasClass("active")?(e(),$(".menu").removeClass("mobileDisplay")):($(".menu").addClass("mobileDisplay"),d())},b.hideMenu=function(){$(window).outerWidth()<641&&($(".burger").removeClass("active"),e(),$(".menu").removeClass("mobileDisplay"))},$(window).resize(function(){$(window).outerWidth()>640?($(".burger").removeClass("active"),$(".menu.mobileDisplay").removeClass("mobileDisplay"),$(".menu__links").removeClass("active").css("display","block"),$(".menu__links li").css("opacity",1)):($(".menu__links").css("display","none"),$(".menu__links li").css("opacity",0))})}]),angular.module("portfolio").controller("WorkCtrl",["$scope","$stateParams","GetWorkItem",function(a,b,c){c.get({id:b.id},function(b){a.work=b})}]),angular.module("dashboardRoutes",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("dashboard",{url:"/dashboard",templateUrl:"/src/js/views/dashboard/index.html",controller:"DashboardCtrl",data:{restricted:!0,pageType:"admin"}}).state("dashboard-add",{url:"/dashboard/add-new-work",templateUrl:"/src/js/views/dashboard/add.html",controller:"DashboardCtrl",data:{restricted:!0,pageType:"admin"}}).state("dashboard-edit",{url:"/dashboard/:id/edit",templateUrl:"/src/js/views/dashboard/edit.html",controller:"DashboardEditCtrl",data:{restricted:!0,pageType:"admin"}}).state("dashboard-delete",{url:"/dashboard/:id/delete",templateUrl:"/src/js/views/dashboard/delete.html",controller:"DashboardDeleteCtrl",data:{restricted:!0,pageType:"admin"}})}]),angular.module("mainRoutes",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("home",{url:"/",views:{"":{templateUrl:"/src/js/views/home.html",controller:"AllWorkCtrl as main"},"footer@home":{templateUrl:"/src/js/views/footer.html",controller:"ContactCtrl"}},data:{pageType:"main"}}).state("work",{url:"/work/:id",views:{"":{templateUrl:"/src/js/views/work-item.html",controller:"WorkCtrl"},"footer@work":{templateUrl:"/src/js/views/footer.html",controller:"ContactCtrl"}},data:{pageType:"main"}}).state("allWork",{url:"/client-work",views:{"":{templateUrl:"/src/js/views/all-work.html",controller:"AllWorkCtrl"},"footer@allWork":{templateUrl:"/src/js/views/footer.html",controller:"ContactCtrl"}},data:{pageType:"main"}}).state("about",{url:"/about",views:{"":{templateUrl:"/src/js/views/about.html",controller:"AboutCtrl"},"footer@about":{templateUrl:"/src/js/views/footer.html",controller:"ContactCtrl"}},data:{pageType:"main"}}).state("login",{url:"/login",templateUrl:"/src/js/views/auth/login.html",controller:"AuthCtrl",data:{pageType:"main"}}).state("logout",{url:"/logout",controller:"AuthCtrl",data:{pageType:"main"}}).state("register",{url:"/register",templateUrl:"/src/js/views/auth/register.html",controller:"AuthCtrl",data:{pageType:"main"}})}]),angular.module("portfolio").service("LoginSvc",["$resource",function(a){return a("/login")}]).service("LogoutSvc",["$resource",function(a){return a("/logout")}]).service("RegisterSvc",["$resource",function(a){return a("/register")}]).service("UserStatus",["$resource","$rootScope",function(a,b){var c=function(){var b=a("/user-status");return b.get({},function(a){return a.status})};return{getUserStatus:c}}]),angular.module("portfolio").service("ContactSvc",["$resource",function(a){return a("/form/contact")}]),angular.module("portfolio").service("GetAllWork",["$resource",function(a){return a("/api/work")}]).service("GetWorkItem",["$resource",function(a){return a("/api/work/:id",{id:"@_id"},{update:{method:"PUT"}})}]);